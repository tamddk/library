<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="Project Gabut By Mas Sodik, Silahkan Download Langusung Gaes - tamddk/gabut atau Hub Mas Sodik di Instagram: @tamddk/@project_sodik"
    />

    <title>SODIK DEMO - ServiceWorker</title>

    <link
      rel="shortcut icon"
      href="https://avatars.githubusercontent.com/u/111125963?v=4"
      type="image/x-icon"
    />

    <link
      rel="stylesheet"
      href="https://tamddk.github.io/library/assets/donate/donate.sodik.css"
    />
  </head>
  <body>
    <table class="w-full text-sm text-left text-gray-500 dark:text-gray-400">
      <thead
        class="text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400"
      >
        <tr>
          <th scope="col" class="px-6 py-3">Title</th>
          <th scope="col" class="px-6 py-3">Access</th>
        </tr>
      </thead>
      <tbody>
        <tr
          class="bg-white border-b dark:bg-gray-800 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600"
        >
          <th
            scope="row"
            class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white"
          >
            Notification :
          </th>
          <td id="notif-sodik" class="px-6 py-4"></td>
        </tr>
      </tbody>
    </table>
    <script>
      // Notification.requestPermission()

      if ("serviceWorker" in navigator) {
        // Register a service worker hosted at the root of the
        // site using the default scope.
        navigator.serviceWorker
          .register("/sw.js", { scope: "/getServiceWorkerNotification/" })
          .then(
            (registration) => {
              console.log(
                "Service worker registration succeeded:",
                registration
              );
              showNotification();
            },
            (error) => {
              console.error(`Service worker registration failed: ${error}`);
            }
          );
      } else {
        console.error("Service workers are not supported.");
      }

      function showNotification() {
        Notification.requestPermission((result) => {
          if (result === "granted") {
            navigator.serviceWorker.ready.then((registration) => {
              registration.showNotification("Vibration Sample", {
                body: "Buzz! Buzz!",
                icon: "../images/touch/chrome-touch-icon-192x192.png",
                vibrate: [200, 100, 200, 100, 200, 100, 200],
                tag: "vibration-sample",
              });
            });
          }
        });
      }

      // [open-source] : location:github.com/tamddk/library/tree/main/getNotification
    </script>
  </body>
</html>
